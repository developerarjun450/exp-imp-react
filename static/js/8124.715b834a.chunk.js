"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8124],{84669:(e,t,a)=>{a.d(t,{Z:()=>s});a(72791);var i=a(80184);const s=()=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{fill:"green",d:"M14.568.075c2.202 1.174 5.938 4.883 7.432 6.881-1.286-.9-4.044-1.657-6.091-1.179.222-1.468-.185-4.534-1.341-5.702zm7.432 10.925v13h-20v-24h8.409c4.857 0 3.335 8 3.335 8 3.009-.745 8.256-.419 8.256 3zm-16 5h5v-4h-5v4zm12 2h-12v1h12v-1zm0-3h-5v1h5v-1zm0-3h-5v1h5v-1z"})})},8817:(e,t,a)=>{a.d(t,{Z:()=>l});var i=a(55294);const s="http://localhost:4000/api",n={storeDetails:async(e,t)=>{console.log("pppp=>",t);try{return(await i.Z.post("".concat(s,"/admin/continents/store-educational-institutes"),t,{headers:{"Content-Type":"multipart/form-data",Authorization:e}})).data}catch(a){throw a.response?a.response.data:a.message+"--"+a.name}},fetchDetailsById:async(e,t)=>{try{return(await i.Z.get("".concat(s,"/admin/continents/").concat(t.continent,"/").concat(t.instituteId,"/institute-detail"),{headers:{Authorization:e}})).data}catch(a){throw a.response?a.response.data:a.message+"--"+a.name}},updateInstitueDetails:async(e,t)=>{try{return(await i.Z.post("".concat(s,"/admin/continents/institute-detail-update"),t,{headers:{"Content-Type":"multipart/form-data",Authorization:e}})).data}catch(a){throw a.response?a.response.data:a.message+"--"+a.name}},removeFileFromDetails:async(e,t)=>{try{return(await i.Z.post("".concat(s,"/admin/continents/institute-detail-remove-file"),t,{headers:{Authorization:e}})).data}catch(a){throw a.response?a.response.data:a.message+"--"+a.name}}},l={storeInstituteDetails:async(e,t)=>{try{return await n.storeDetails(e,t)}catch(a){throw a}},fetchInstituteDetailsById:async(e,t)=>{try{return await n.fetchDetailsById(e,t)}catch(a){throw a}},removeFileFromDetailsController:async(e,t)=>{try{return await n.removeFileFromDetails(e,t)}catch(a){throw a}},updateInstituteDetail:async(e,t)=>{try{return await n.updateInstitueDetails(e,t)}catch(a){throw a}}}},78124:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var i=a(72791),s=a(57689),n=a(30734),l=a(45471),o=a(55087),d=a(77618),r=a(6265),c=a(48113),m=a(26775),u=a(95294),h=a(2328),x=a(27316),p=a(71987),j=a(25512),v=a(22618),g=a(43048),y=a(69759),C=a(8817),f=a(31409),b=a(84669),I=a(23874),V=a(80184);const k=()=>{const[e,t]=(0,i.useState)(!1),[a,k]=(0,i.useState)({}),[w,L]=(0,i.useState)(!1),S=f.Z.getAccessToken(),D=(0,s.s0)(),F=(0,s.TH)();let{institueData:T,continent:z,countryId:N,instituteId:O}=F.state||{};const[A,E]=(0,i.useState)([{name:"areaOfStudy-name",studentCount:"areaOfStudy-studentsCount",rating:"areaOfStudy-rating",nameValue:"",studentCountValue:"",ratingValue:""}]),[_,R]=(0,i.useState)(1),[Z,q]=(0,i.useState)([{name:"teacherlist-nameOfTheTeacher",specializedIn:"teacherlist-specializedIn",experience:"teacherlist-expirence",nameValue:"",specializedInValue:"",experienceValue:""}]),[P,U]=(0,i.useState)(1),[B,G]=(0,i.useState)([{name:"aminitiesList-name",description:"aminitiesList-description",nameValue:"",descriptionValue:""}]),[Y,H]=(0,i.useState)(1),[M,J]=(0,i.useState)([]),[K,Q]=(0,i.useState)([]),[W,X]=(0,i.useState)([]),$=async(e,t)=>{let a={continent:z,instituteId:O,fileName:e,fileFieldname:t};try{let e=await C.Z.removeFileFromDetailsController(S,a);e.success&&k(e.data)}catch(i){console.log("Error on remove file => ",i)}};(0,i.useEffect)((()=>{(async()=>{let e=[];try{var t,a,i;let o={continent:z,instituteId:O};if(e=await C.Z.fetchInstituteDetailsById(S,o),console.log("response==>",e),localStorage.setItem("tokenStatus",e.data.tokenStatus),k(e.data),(null===(t=e.data)||void 0===t?void 0:t.amenities.length)>0){var s;let t=null===(s=e.data)||void 0===s?void 0:s.amenities.map(((e,t)=>(H(t+1),{name:"aminitiesList-name-".concat(t+1),description:"aminitiesList-description-".concat(t+1),nameValue:e.name,descriptionValue:e.description})));G(t)}if((null===(a=e.data)||void 0===a?void 0:a.teachersList.length)>0){var n;let t=null===(n=e.data)||void 0===n?void 0:n.teachersList.map(((e,t)=>(U(t+1),{name:"teacherlist-nameOfTheTeacher-".concat(t+1),specializedIn:"teacherlist-specializedIn-".concat(t+1),experience:"teacherlist-expirence-".concat(t+1),nameValue:e.nameOfTheTeacher,specializedInValue:e.specializedIn,experienceValue:e.experience})));q(t)}if((null===(i=e.data)||void 0===i?void 0:i.areasOfStudy.length)>0){var l;let t=null===(l=e.data)||void 0===l?void 0:l.areasOfStudy.map(((e,t)=>(R(t+1),{name:"areaOfStudy-name-".concat(t+1),studentCount:"areaOfStudy-studentsCount-".concat(t+1),rating:"areaOfStudy-rating-".concat(t+1),nameValue:e.name,studentCountValue:e.studentsCount,ratingValue:e.rating})));E(t)}}catch(o){console.log("Error on institute detail fetch => ",o)}})()}),[]);return(0,V.jsx)(n.r,{children:(0,V.jsx)(l.b,{xs:12,children:(0,V.jsxs)(o.x,{className:"mb-4",children:[(0,V.jsxs)(d.b,{children:[(0,V.jsx)("strong",{children:"Institute"})," ",(0,V.jsx)("small",{children:"Update Institue Details"})]}),(0,V.jsxs)(r.s,{children:[(0,V.jsx)("p",{className:"text-body-secondary small",children:"Update education details here."}),(0,V.jsx)("p",{className:"text-body-secondary small",children:"Under maintanace"}),(0,V.jsx)(y.q3,{href:"forms/validation",children:(0,V.jsxs)(c.l,{className:"row g-3 needs-validation",noValidate:!0,validated:e,onSubmit:async e=>{console.log("token:",S);const a=e.currentTarget;if(!1===a.checkValidity())e.preventDefault(),e.stopPropagation();else{e.preventDefault(),t(!0);const s=new FormData(a);let n=[],l=[],o=[];Object.values(M).forEach(((e,t)=>{n.push(e)})),Object.values(K).forEach(((e,t)=>{l.push(e)})),Object.values(W).forEach(((e,t)=>{o.push(e)}));const d={};s.forEach(((e,t)=>{d[t]="relatedDocuments"===t?l:"relatedImages"===t?o:"relatedVideos"===t?n:e})),d.countryId=N,d.continent=z,d.instituteId=O;let r=[];console.log(d);try{r=await C.Z.updateInstituteDetail(S,d),console.log("response==>",r.data),localStorage.setItem("tokenStatus",r.data.tokenStatus),r.success&&(T=T.filter((e=>e._id!=r.data._id)),T.push(r.data),T=T.map((e=>e._id===r.data._id?r.data:e)),D("/admin/courses/continents/educational-institutes",{replace:!0,state:{institueData:T,countryId:N,continent:z}}))}catch(i){if(console.log(i),400===i.statusCode){let e=[];i.errors.forEach((t=>{e[t.param]=t.msg})),L(e),console.log("backEndValidation =>",w)}}}t(!0)},children:[(0,V.jsxs)(l.b,{md:4,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom01",children:"Institute Name"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom01",style:{},defaultValue:a.name,name:"name",required:!0}),w.name?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.name}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"})]}),(0,V.jsxs)(l.b,{md:4,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom02",children:"Short Name"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom02",defaultValue:a.shortName,name:"shortName",required:!0}),w.shortName?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.shortName}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"})]}),(0,V.jsxs)(l.b,{md:4,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustomUsername",children:"Email"}),(0,V.jsxs)(x.Y,{className:"has-validation",children:[(0,V.jsx)(p.w,{id:"inputGroupPrepend",children:"@"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustomUsername",defaultValue:a.email,name:"email","aria-describedby":"inputGroupPrepend",required:!0}),w.email?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.email}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"})]})]}),(0,V.jsxs)(l.b,{md:6,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom03",children:"City"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom03",defaultValue:a.city,name:"city",required:!0}),w.city?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.city}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"})]}),(0,V.jsxs)(l.b,{md:3,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom04",children:"District"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom04",defaultValue:a.district,name:"district",required:!0}),w.district?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.district}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"})]}),(0,V.jsxs)(l.b,{md:3,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom05",children:"State"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom05",defaultValue:a.state,name:"state",required:!0}),w.state?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.state}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"})]}),(0,V.jsxs)(l.b,{md:6,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom06",children:"Phone"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom06",defaultValue:a.phone,name:"phone",required:!0}),w.phone?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.phone}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"})]}),(0,V.jsxs)(l.b,{md:6,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom07",children:"Location"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom07",defaultValue:a.location,name:"location",required:!0}),w.location?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.location}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"})]}),(0,V.jsxs)(l.b,{md:12,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom06",children:"Description"}),(0,V.jsx)(j.P,{type:"text",id:"validationCustom06",name:"description",value:a.description,required:!0}),w.description?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.description}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"})]}),(0,V.jsx)(d.b,{children:(0,V.jsx)("strong",{children:"Documents"})}),(0,V.jsxs)(l.b,{md:6,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom08",children:"Title Image"}),(0,V.jsx)(u.j,{type:"file",accept:"image/*",id:"validationCustom08",name:"titleImage"}),w.titleImage?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.titleImage}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"}),(0,V.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:"10px"},children:a.titleImage&&""!=a.titleImage?(0,V.jsx)("div",{style:{textAlign:"center",marginTop:"10px"},children:(0,V.jsxs)("div",{children:[(0,V.jsx)("img",{src:a.titleImage,alt:"Title image",width:"80px",height:"65px"}),(0,V.jsx)("br",{}),(0,V.jsx)(v.u,{color:"danger",onClick:()=>$(a.titleImage,"titleImage"),style:{color:"white",marginTop:"10px"},children:"Remove"})]})}):(0,V.jsx)("div",{style:{textAlign:"center",marginTop:"10px"}})})]}),(0,V.jsxs)(l.b,{md:6,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom09",children:"Related Documents"}),(0,V.jsx)(u.j,{type:"file",id:"validationCustom09",onChange:e=>{const t=e.target.files;Q(t)},multiple:!0,accept:".doc, .docx, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, .xls, .xlsx, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",name:"relatedDocuments"}),w.relatedDocuments?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.relatedDocuments}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"}),(0,V.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:"10px"},children:a.relatedDocuments&&a.relatedDocuments.length>0?a.relatedDocuments.map(((e,t)=>{const a=e.split("/"),i=a[a.length-1];let s=i;if(i.length>6){s=i.split(".")[0].slice(0,6)+"..."+"."+i.split(".").pop()}return(0,V.jsxs)("div",{style:{textAlign:"center"},children:[(0,V.jsx)(I.Z,{sx:{color:"#fff",bgcolor:"transparent",alignSelf:"flex-end"},children:(0,V.jsx)(b.Z,{})}),(0,V.jsx)("br",{}),(0,V.jsx)("a",{href:e,children:s}),(0,V.jsx)("br",{}),(0,V.jsx)(v.u,{color:"danger",onClick:()=>$(e,"relatedDocuments"),style:{color:"white",marginTop:"10px"},children:"Remove"})]},t)})):(0,V.jsx)("div",{style:{textAlign:"center"}})})]}),(0,V.jsxs)(l.b,{md:6,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom10",children:"Related Videos"}),(0,V.jsx)(u.j,{type:"file",id:"validationCustom10",multiple:!0,accept:".mp4, .avi, .mkv,.webm",name:"relatedVideos",onChange:e=>{const t=e.target.files;J(t)}}),w.relatedVideos?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.relatedVideos}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"}),(0,V.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:"10px"},children:a.relatedVideos&&a.relatedVideos.length>0?a.relatedVideos.map(((e,t)=>(0,V.jsx)("div",{style:{textAlign:"center",marginTop:"10px"},children:(0,V.jsxs)("div",{children:[(0,V.jsxs)("video",{width:"133",height:"80",controls:!0,children:[(0,V.jsx)("source",{src:e,type:"video/".concat(e.split(".").pop().toLowerCase())}),"Your browser does not support the video tag."]}),(0,V.jsx)("br",{}),(0,V.jsx)(v.u,{color:"danger",onClick:()=>$(e,"relatedVideos"),style:{color:"white"},children:"Remove"})]})},t))):(0,V.jsx)("div",{style:{textAlign:"center"}})})]}),(0,V.jsxs)(l.b,{md:6,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom11",children:"Related Images"}),(0,V.jsx)(u.j,{type:"file",id:"validationCustom11",multiple:!0,onChange:e=>{const t=e.target.files;X(t)},accept:"image/*",name:"relatedImages"}),w.relatedImages?(0,V.jsx)(h.C,{style:{display:"block"},invalid:!0,children:w.relatedImages}):(0,V.jsx)(h.C,{valid:!0,children:"Looks good!"}),(0,V.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:"10px"},children:a.relatedImages&&a.relatedImages.length>0?a.relatedImages.map(((e,t)=>(0,V.jsx)("div",{style:{textAlign:"center",marginTop:"10px"},children:(0,V.jsxs)("div",{children:[(0,V.jsx)("img",{src:e,alt:"related image",width:"80px",height:"65px"}),(0,V.jsx)("br",{}),(0,V.jsx)("br",{}),(0,V.jsx)(v.u,{color:"danger",onClick:()=>$(e,"relatedImages"),style:{color:"white"},children:"Remove"})]})},t))):(0,V.jsx)("div",{style:{textAlign:"center"}})})]}),(0,V.jsx)(g.n,{variant:"underline-border"}),(0,V.jsx)(d.b,{children:(0,V.jsx)("strong",{children:"Areas Of Study"})}),A&&A.map(((e,t)=>(0,V.jsxs)(i.Fragment,{children:[(0,V.jsxs)(l.b,{md:4,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom12",children:"Name"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom12",value:e.nameValue,name:e.name})]}),(0,V.jsxs)(l.b,{md:4,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom13",children:"Number of students"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom13",value:e.studentCountValue,name:e.studentCount})]}),(0,V.jsxs)(l.b,{md:4,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom14",children:"Rating out of 10"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom14",value:e.ratingValue,name:e.rating})]})]},t))),(0,V.jsxs)(l.b,{xs:12,className:"text-end",children:[(0,V.jsx)(v.u,{color:"primary",style:{marginRight:"20px"},onClick:()=>{const e=parseInt(_)+1;R(e),console.log(e),E((t=>[...t,{name:"areaOfStudy-name-".concat(e),studentCount:"areaOfStudy-studentsCount-".concat(e),rating:"areaOfStudy-rating-".concat(e),nameValue:"",studentCountValue:"",ratingValue:""}]))},children:"Add New Entry"}),A&&A.length>1&&(0,V.jsx)(v.u,{color:"danger",style:{color:"white"},onClick:()=>(()=>{const e=A.slice(0,-1);E(e),R((e=>e-1))})(),children:"Remove Last Entry"})]}),(0,V.jsx)(g.n,{variant:"underline-border"}),(0,V.jsx)(d.b,{children:(0,V.jsx)("strong",{children:"Areas Of Study - Teacher list"})}),Z&&Z.map(((e,t)=>(0,V.jsxs)(i.Fragment,{children:[(0,V.jsxs)(l.b,{md:4,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom12",children:"Name"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom12",value:e.nameValue,name:e.name})]}),(0,V.jsxs)(l.b,{md:4,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom13",children:"specialized In"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom13",value:e.specializedInValue,name:e.specializedIn})]}),(0,V.jsxs)(l.b,{md:4,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom14",children:"Experience in years"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom14",value:e.experienceValue,name:e.experience})]})]},t))),(0,V.jsxs)(l.b,{xs:12,className:"text-end",children:[(0,V.jsx)(v.u,{color:"primary",style:{marginRight:"20px"},onClick:()=>{const e=parseInt(P)+1;U(e),q((t=>[...t,{name:"teacherlist-nameOfTheTeacher-".concat(e),specializedIn:"teacherlist-specializedIn-".concat(e),experience:"teacherlist-expirence-".concat(e),nameValue:"",specializedInValue:"",experienceValue:""}]))},children:"Add New Entry"}),Z&&Z.length>1&&(0,V.jsx)(v.u,{color:"danger",style:{color:"white"},onClick:()=>(()=>{const e=Z.slice(0,-1);q(e),U((e=>e-1))})(),children:"Remove Last Entry"})]}),(0,V.jsx)(d.b,{children:(0,V.jsx)("strong",{children:"Aminities"})}),B&&B.map(((e,t)=>(0,V.jsxs)(i.Fragment,{children:[(0,V.jsxs)(l.b,{md:6,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom12",children:"Name"}),(0,V.jsx)(u.j,{type:"text",id:"validationCustom12",value:e.nameValue,name:e.name})]}),(0,V.jsxs)(l.b,{md:6,children:[(0,V.jsx)(m.L,{htmlFor:"validationCustom13",children:"Description"}),(0,V.jsx)(j.P,{type:"text",id:"validationCustom13",value:e.descriptionValue,name:e.description})]})]},t))),(0,V.jsxs)(l.b,{xs:12,className:"text-end",children:[(0,V.jsx)(v.u,{color:"primary",style:{marginRight:"20px"},onClick:()=>{const e=parseInt(Y)+1;H(e),G((t=>[...t,{name:"aminitiesList-name-".concat(e),description:"aminitiesList-description-".concat(e),nameValue:"",descriptionValue:""}]))},children:"Add New Entry"}),B&&B.length>1&&(0,V.jsx)(v.u,{color:"danger",style:{color:"white"},onClick:()=>(()=>{const e=B.slice(0,-1);G(e),H((e=>e-1))})(),children:"Remove Last Entry"})]}),(0,V.jsx)(l.b,{xs:12,children:(0,V.jsx)(v.u,{color:"success",type:"submit",children:"Update"})})]})})]})]})})})}}}]);
//# sourceMappingURL=8124.715b834a.chunk.js.map